# 256色・マウス・履歴
set -g default-terminal "xterm-256color"
set -g history-limit 100000
set -g mouse on

# プレフィックスを Ctrl-a に（好みで）
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ウィンドウ/ペイン表示
set -g status on
setw -g automatic-rename on
set -g renumber-windows on

# ステータスバーの右端にアクティブペイン番号を表示
set -g status-right "Pane:#(tmux display -p '#{pane_index}') | %Y-%m-%d %H:%M"

# クリップボード（OS別）
# macOS
if -b 'command -v pbcopy >/dev/null 2>&1' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"'
# WSL
if -b '[ -n "$WSL_DISTRO_NAME" ]' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "clip.exe"'
# X11
if -b 'command -v xclip >/dev/null 2>&1' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -sel clip"'

# Vi 風キー操作（コピー・移動が楽）
setw -g mode-keys vi

# 分割ショートカット（Prefix は Ctrl-a 想定）
bind '|' split-window -h
bind '-' split-window -v
bind 't' split-window -h "watch -n 1 ~/dotfiles/bin/tmux_pane_top.sh"
bind 'r' source-file ~/.tmux.conf \; display "reloaded ~/.tmux.conf"
