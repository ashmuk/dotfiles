# 256色・マウス・履歴
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g history-limit 100000
set -g mouse on

# プレフィックスを Ctrl-a に（好みで）
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ウィンドウ/ペイン表示
set -g status on
setw -g automatic-rename on
set -g renumber-windows on
#set -g base-index 1
#setw -g pane-base-index 1

# ステータスバーの設定
set -g status-bg colour235
set -g status-fg colour136
set -g status-right "Pane:#(tmux display -p '#{pane_index}') | %Y-%m-%d %H:%M"

# クリップボード（OS別）
# macOS
if -b 'command -v pbcopy >/dev/null 2>&1' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"'
# WSL
if -b '[ -n "$WSL_DISTRO_NAME" ]' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "clip.exe"'
# X11
if -b 'command -v xclip >/dev/null 2>&1' 'bind -T copy-mode-vi y send -X copy-pipe-and-cancel "xclip -sel clip"'

# Vi 風キー操作（コピー・移動が楽）
setw -g mode-keys vi

# Vim スタイルのペイン移動（プレフィックス不要）
bind-key -n C-h select-pane -L
bind-key -n C-l select-pane -R
bind-key -n C-j select-pane -D
bind-key -n C-k select-pane -U

# 分割ショートカット（Prefix は Ctrl-a 想定）
bind '|' split-window -h
bind '-' split-window -v
unbind '"'
unbind %
bind 't' split-window -h "watch -n 1 ~/dotfiles/bin/tmux_pane_top.sh"
bind 'r' source-file ~/.tmux.conf \; display "reloaded ~/.tmux.conf"
